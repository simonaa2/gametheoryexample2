<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Theory Analyzer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            text-align: center;
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .game-container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .game-title {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .payoff-matrix {
            margin: 20px 0;
        }
        .matrix-table {
            border-collapse: collapse;
            margin: 10px 0;
        }
        .matrix-table th, .matrix-table td {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: center;
        }
        .matrix-table th {
            background-color: #3498db;
            color: white;
        }
        .equilibrium {
            background-color: #e8f5e8;
            padding: 15px;
            border-left: 4px solid #27ae60;
            margin: 15px 0;
        }
        .mixed-equilibrium {
            background-color: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
        }
        .custom-game {
            background-color: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .input-group {
            display: inline-block;
            margin: 5px;
        }
        .input-group label {
            display: block;
            font-size: 12px;
            color: #666;
        }
        .input-group input {
            width: 50px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        button {
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover {
            background-color: #2980b9;
        }
        .result-box {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéØ Game Theory Analyzer</h1>
        <p>Interactive tool for analyzing strategic games and finding Nash equilibria</p>
    </div>

    <div class="game-container">
        <h2 class="game-title">üöì Prisoner's Dilemma</h2>
        <p><strong>Scenario:</strong> Two prisoners must decide whether to cooperate with each other or defect (betray).</p>
        
        <div class="payoff-matrix">
            <h3>Player 1 Payoffs (rows = P1 strategy, columns = P2 strategy)</h3>
            <table class="matrix-table">
                <tr><th></th><th>Cooperate</th><th>Defect</th></tr>
                <tr><th>Cooperate</th><td>3</td><td>0</td></tr>
                <tr><th>Defect</th><td>5</td><td>1</td></tr>
            </table>
            
            <h3>Player 2 Payoffs</h3>
            <table class="matrix-table">
                <tr><th></th><th>Cooperate</th><th>Defect</th></tr>
                <tr><th>Cooperate</th><td>3</td><td>5</td></tr>
                <tr><th>Defect</th><td>0</td><td>1</td></tr>
            </table>
        </div>
        
        <div class="equilibrium">
            <strong>Nash Equilibrium:</strong> (Defect, Defect) with payoffs (1, 1)<br>
            <strong>Explanation:</strong> Each player has a dominant strategy to defect, leading to a suboptimal outcome for both.
        </div>
    </div>

    <div class="game-container">
        <h2 class="game-title">‚úÇÔ∏è Rock-Paper-Scissors</h2>
        <p><strong>Scenario:</strong> Classic zero-sum game where each player simultaneously chooses rock, paper, or scissors.</p>
        
        <div class="payoff-matrix">
            <h3>Player 1 Payoffs (Win = 1, Lose = -1, Tie = 0)</h3>
            <table class="matrix-table">
                <tr><th></th><th>Rock</th><th>Paper</th><th>Scissors</th></tr>
                <tr><th>Rock</th><td>0</td><td>-1</td><td>1</td></tr>
                <tr><th>Paper</th><td>1</td><td>0</td><td>-1</td></tr>
                <tr><th>Scissors</th><td>-1</td><td>1</td><td>0</td></tr>
            </table>
        </div>
        
        <div class="mixed-equilibrium">
            <strong>Mixed Strategy Nash Equilibrium:</strong> Each player plays Rock, Paper, and Scissors with probability 1/3 each<br>
            <strong>Expected Payoff:</strong> 0 for both players<br>
            <strong>Explanation:</strong> No pure strategy equilibrium exists; players must randomize to avoid being exploited.
        </div>
    </div>

    <div class="game-container">
        <h2 class="game-title">üé≠ Battle of the Sexes</h2>
        <p><strong>Scenario:</strong> A couple wants to spend time together but prefers different activities (Opera vs Football).</p>
        
        <div class="payoff-matrix">
            <h3>Player 1 Payoffs (prefers Opera)</h3>
            <table class="matrix-table">
                <tr><th></th><th>Opera</th><th>Football</th></tr>
                <tr><th>Opera</th><td>2</td><td>0</td></tr>
                <tr><th>Football</th><td>0</td><td>1</td></tr>
            </table>
            
            <h3>Player 2 Payoffs (prefers Football)</h3>
            <table class="matrix-table">
                <tr><th></th><th>Opera</th><th>Football</th></tr>
                <tr><th>Opera</th><td>1</td><td>0</td></tr>
                <tr><th>Football</th><td>0</td><td>2</td></tr>
            </table>
        </div>
        
        <div class="equilibrium">
            <strong>Pure Strategy Nash Equilibria:</strong><br>
            1. (Opera, Opera) with payoffs (2, 1)<br>
            2. (Football, Football) with payoffs (1, 2)
        </div>
        
        <div class="mixed-equilibrium">
            <strong>Mixed Strategy Nash Equilibrium:</strong><br>
            Player 1 chooses Opera with probability 2/3<br>
            Player 2 chooses Opera with probability 1/3<br>
            <strong>Expected Payoffs:</strong> (2/3, 2/3)
        </div>
    </div>

    <div class="game-container">
        <h2 class="game-title">üéÆ Custom Game Analyzer</h2>
        <div class="custom-game">
            <h3>Enter your own 2x2 game payoffs:</h3>
            <p>Enter payoffs for each outcome (Player 1 payoff, Player 2 payoff):</p>
            
            <table style="margin: 20px 0;">
                <tr>
                    <th></th>
                    <th>Player 2: Strategy 1</th>
                    <th>Player 2: Strategy 2</th>
                </tr>
                <tr>
                    <th>Player 1: Strategy 1</th>
                    <td>
                        <div class="input-group">
                            <label>P1 payoff:</label>
                            <input type="number" id="a11" value="3">
                        </div>
                        <div class="input-group">
                            <label>P2 payoff:</label>
                            <input type="number" id="b11" value="3">
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <label>P1 payoff:</label>
                            <input type="number" id="a12" value="0">
                        </div>
                        <div class="input-group">
                            <label>P2 payoff:</label>
                            <input type="number" id="b12" value="5">
                        </div>
                    </td>
                </tr>
                <tr>
                    <th>Player 1: Strategy 2</th>
                    <td>
                        <div class="input-group">
                            <label>P1 payoff:</label>
                            <input type="number" id="a21" value="5">
                        </div>
                        <div class="input-group">
                            <label>P2 payoff:</label>
                            <input type="number" id="b21" value="0">
                        </div>
                    </td>
                    <td>
                        <div class="input-group">
                            <label>P1 payoff:</label>
                            <input type="number" id="a22" value="1">
                        </div>
                        <div class="input-group">
                            <label>P2 payoff:</label>
                            <input type="number" id="b22" value="1">
                        </div>
                    </td>
                </tr>
            </table>
            
            <button onclick="analyzeCustomGame()">üîç Analyze Game</button>
            <button onclick="resetToDefault()">üîÑ Reset to Prisoner's Dilemma</button>
            
            <div id="customResults" class="result-box" style="display: none;">
                <h3>Analysis Results:</h3>
                <div id="resultsContent"></div>
            </div>
        </div>
    </div>

    <div class="game-container">
        <h2 class="game-title">üìö About Game Theory</h2>
        <p><strong>Game Theory</strong> is the mathematical study of strategic decision-making among rational agents. Key concepts include:</p>
        <ul>
            <li><strong>Nash Equilibrium:</strong> A strategy profile where no player can improve by unilaterally changing strategy</li>
            <li><strong>Dominant Strategy:</strong> A strategy that is best regardless of what others do</li>
            <li><strong>Zero-Sum Game:</strong> One player's gain equals another's loss</li>
            <li><strong>Mixed Strategy:</strong> Randomizing between pure strategies with specific probabilities</li>
        </ul>
        
        <p><strong>This R-based application demonstrates:</strong></p>
        <ul>
            <li>Analysis of classic game theory problems</li>
            <li>Nash equilibrium identification (pure and mixed strategies)</li>
            <li>Interactive payoff matrix customization</li>
            <li>Educational examples with real-world applications</li>
        </ul>
    </div>

    <script>
        // JavaScript functions for interactive analysis
        function findNashEquilibria(p1Matrix, p2Matrix) {
            const equilibria = [];
            
            // Check each cell for Nash equilibrium
            for (let i = 0; i < 2; i++) {
                for (let j = 0; j < 2; j++) {
                    // Check if Player 1 wants to deviate
                    let p1Best = 0;
                    for (let k = 0; k < 2; k++) {
                        if (p1Matrix[k][j] > p1Matrix[p1Best][j]) {
                            p1Best = k;
                        }
                    }
                    
                    // Check if Player 2 wants to deviate
                    let p2Best = 0;
                    for (let k = 0; k < 2; k++) {
                        if (p2Matrix[i][k] > p2Matrix[i][p2Best]) {
                            p2Best = k;
                        }
                    }
                    
                    if (i === p1Best && j === p2Best) {
                        equilibria.push({
                            p1Strategy: i + 1,
                            p2Strategy: j + 1,
                            p1Payoff: p1Matrix[i][j],
                            p2Payoff: p2Matrix[i][j]
                        });
                    }
                }
            }
            
            return equilibria;
        }
        
        function findMixedNash(p1Matrix, p2Matrix) {
            // Calculate mixed strategy Nash equilibrium for 2x2 games
            const denom_p2 = p1Matrix[0][0] - p1Matrix[0][1] - p1Matrix[1][0] + p1Matrix[1][1];
            const denom_p1 = p2Matrix[0][0] - p2Matrix[1][0] - p2Matrix[0][1] + p2Matrix[1][1];
            
            if (Math.abs(denom_p2) < 1e-10 || Math.abs(denom_p1) < 1e-10) {
                return null;
            }
            
            const p2_prob1 = (p1Matrix[1][1] - p1Matrix[0][1]) / denom_p2;
            const p1_prob1 = (p2Matrix[1][1] - p2Matrix[1][0]) / denom_p1;
            
            if (p1_prob1 >= 0 && p1_prob1 <= 1 && p2_prob1 >= 0 && p2_prob1 <= 1) {
                const p1_expected = p1_prob1 * p2_prob1 * p1Matrix[0][0] + 
                                   p1_prob1 * (1-p2_prob1) * p1Matrix[0][1] +
                                   (1-p1_prob1) * p2_prob1 * p1Matrix[1][0] +
                                   (1-p1_prob1) * (1-p2_prob1) * p1Matrix[1][1];
                
                const p2_expected = p1_prob1 * p2_prob1 * p2Matrix[0][0] + 
                                   p1_prob1 * (1-p2_prob1) * p2Matrix[0][1] +
                                   (1-p1_prob1) * p2_prob1 * p2Matrix[1][0] +
                                   (1-p1_prob1) * (1-p2_prob1) * p2Matrix[1][1];
                
                return {
                    p1_prob1: p1_prob1,
                    p2_prob1: p2_prob1,
                    p1_expected: p1_expected,
                    p2_expected: p2_expected
                };
            }
            
            return null;
        }
        
        function analyzeCustomGame() {
            // Get input values
            const a11 = parseFloat(document.getElementById('a11').value);
            const a12 = parseFloat(document.getElementById('a12').value);
            const a21 = parseFloat(document.getElementById('a21').value);
            const a22 = parseFloat(document.getElementById('a22').value);
            const b11 = parseFloat(document.getElementById('b11').value);
            const b12 = parseFloat(document.getElementById('b12').value);
            const b21 = parseFloat(document.getElementById('b21').value);
            const b22 = parseFloat(document.getElementById('b22').value);
            
            const p1Matrix = [[a11, a12], [a21, a22]];
            const p2Matrix = [[b11, b12], [b21, b22]];
            
            // Find equilibria
            const pureEquilibria = findNashEquilibria(p1Matrix, p2Matrix);
            const mixedEquilibrium = findMixedNash(p1Matrix, p2Matrix);
            
            // Display results
            let results = '<h4>Payoff Matrices:</h4>';
            results += '<p><strong>Player 1 Matrix:</strong><br>';
            results += `[${a11}, ${a12}]<br>[${a21}, ${a22}]</p>`;
            results += '<p><strong>Player 2 Matrix:</strong><br>';
            results += `[${b11}, ${b12}]<br>[${b21}, ${b22}]</p>`;
            
            results += '<h4>Pure Strategy Nash Equilibria:</h4>';
            if (pureEquilibria.length > 0) {
                pureEquilibria.forEach((eq, index) => {
                    results += `<div class="equilibrium">
                        <strong>Equilibrium ${index + 1}:</strong> 
                        Player 1 plays Strategy ${eq.p1Strategy}, 
                        Player 2 plays Strategy ${eq.p2Strategy}<br>
                        <strong>Payoffs:</strong> Player 1 = ${eq.p1Payoff}, Player 2 = ${eq.p2Payoff}
                    </div>`;
                });
            } else {
                results += '<p>No pure strategy Nash equilibria found.</p>';
            }
            
            if (mixedEquilibrium) {
                results += '<h4>Mixed Strategy Nash Equilibrium:</h4>';
                results += `<div class="mixed-equilibrium">
                    <strong>Player 1:</strong> Strategy 1 with probability ${mixedEquilibrium.p1_prob1.toFixed(3)}<br>
                    <strong>Player 2:</strong> Strategy 1 with probability ${mixedEquilibrium.p2_prob1.toFixed(3)}<br>
                    <strong>Expected Payoffs:</strong> Player 1 = ${mixedEquilibrium.p1_expected.toFixed(3)}, 
                    Player 2 = ${mixedEquilibrium.p2_expected.toFixed(3)}
                </div>`;
            } else {
                results += '<h4>Mixed Strategy Nash Equilibrium:</h4><p>No mixed strategy equilibrium found.</p>';
            }
            
            document.getElementById('resultsContent').innerHTML = results;
            document.getElementById('customResults').style.display = 'block';
        }
        
        function resetToDefault() {
            // Reset to Prisoner's Dilemma values
            document.getElementById('a11').value = 3;
            document.getElementById('a12').value = 0;
            document.getElementById('a21').value = 5;
            document.getElementById('a22').value = 1;
            document.getElementById('b11').value = 3;
            document.getElementById('b12').value = 5;
            document.getElementById('b21').value = 0;
            document.getElementById('b22').value = 1;
            
            document.getElementById('customResults').style.display = 'none';
        }
    </script>
</body>
</html>